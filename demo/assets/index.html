<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Demo</title>
<!--    <script>location.href = '/demo'</script>-->
<!--    <script src="http://web-services.loc/collector.js" type="application/javascript"></script>-->
    <script src="dist/na.bundle.js" data-param=""></script>
    <link rel="stylesheet" href="/demo/assets/css/grid.css">
    <style type="text/css" rel="stylesheet">
        html, body {
            /*background-color: #3a3a3a;*/
            /*color: white;*/
        }
        #app {
            font-size: 12px;
            width: 100%;
            height: 100%;
        }
        .popup-fill {
            width: 100vw;
            height: 100vh;
            left: 0;
            top: 0;
            position: fixed;
            background-color: rgba(0,0,0,0.3);
        }
        .popup{
            width: 400px;
            margin: 10px auto;
            border: 3px solid #7c7c7f;
            background-color: white;
            color: #3a3a3a;
        }
        .header{
            height: 70px;
            background-color: #472768;
            color: white;
        }
        .body{
            min-height: 100px;
            border-top: 2px solid #3a3a3a;
            border-bottom: 2px solid #3a3a3a;
        }
        .footer{
            height: 70px;
            background-color: #472768;
            color: white;
        }
    </style>
</head>
<body>
<div id="app">
    <div data-component="PopupButtonComponent">Say Hello</div>
    <div data-component="PopupFillComponent"></div>
    <div data-component="PopupWindowComponent" title="hello" age="43"></div>
</div>
<script>

    const {Util, Dom} = NamespaceApplication;
    const app = new NamespaceApplication({
        id: '#app'
    });

    app.component({
        id: 'PopupWindowComponent',
        props: ['title', 'age'],
        styles: {template: {zIndex: 1000}, '.popup' : {},},
        template: `
<div class="popup" data-node="popup">
    <div class="header table" data-node="header"><h1>{header}</h1></div>
    <div class="body" data-node="body">{body}</div>
    <div class="footer table">
        <div class="text-right pr-1">
            <button on-click="ok">Ok</button>
            <button on-click="cancel">Cancel</button>
        </div>
    </div>
</div>`,
        init () {},
        complete (app) {
            app.state.action('header', (source, value) => {
                Dom(this.node['header']).inject(Dom.create('h1', {}, value ));
            });
            app.state.action('body', (source, value) => {
                Dom(this.node['body']).inject(Dom.create('p', {}, value ));
            });
        },
        methods: {
            ok (e) {
                app.state.set('header', 'HELLO POPUP');
                app.state.set('body', 'Simple text example');
            },
            cancel (e) {
                app.state.set('header', 'BAY POPUP');
                app.state.set('body', 'Just jump outside');
            },
        },
        show (e) { this.template.classList.remove('hide') },
        hide (e) { this.template.classList.add('hide') },
        toggle (e) {
            this.template.classList.contains('hide') ? this.show() : this.hide();
        },
    });

    app.component({
        id: 'PopupButtonComponent',
        styles: {'.popup' : {},},
        template: `
            <div class="button select-off" on-click="onClick">Open</div>`,
        init () {
            // this.template type of string
        },
        complete (app) {
            // this.template type of NodeElement
        },
        methods: {
            onClick (e) {
                app.component('PopupWindowComponent').toggle();
            },
        }
    });

    app.component({
        id: 'PopupFillComponent',
        styles: {template: {zIndex: 999}, '.popup' : {},},
        template: `
            <div class="popup-fill" on-click="onClick"></div>`,
        init () {
            // this.template type of string
        },
        complete (app) {
            // this.template type of NodeElement
        },
        methods: {
            onClick (e) {},
        },
        show(){
            this.template.classList.remove('hide');},
        hide(){
            this.template.classList.add('hide');},
    });

    // console.log(Util);

</script>
</body>
</html>